{"version":3,"sources":["webpack:///src/components/Search.vue","webpack:///./src/components/Search.vue?229e","webpack:///./src/components/Search.vue","webpack:///./src/api/source.js"],"names":["Search","name","data","sources","querySong","q","source","pageNum","pageSize","resultSong","loading","list","total","methods","showArtistsName","result","forEach","element","substring","handleQuerySong","this","console","log","doQuerySong","_this","Object","song","then","res","finally","setTimeout","handleQuerySources","_this2","api_source","e","enabled","id","handlePlaySong","_this3","$refs","testAudio","src","play","mounted","components_Search","render","_vm","_h","$createElement","_c","_self","attrs","inline","size","label","clearable","model","value","callback","$$v","$set","expression","_v","_l","key","disabled","_s","on","click","directives","rawName","height","stripe","prop","scopedSlots","_u","fn","scope","row","artists","free","type","$event","background","layout","page-size","current-page","size-change","current-change","num","ref","controls","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","axios","get","__WEBPACK_IMPORTED_MODULE_0__utils_http_js__"],"mappings":"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","file":"static/js/3.ed0590540f6eac2c4baf.js","sourcesContent":["<template>\r\n<div>\r\n  <el-form inline size=\"medium\">\r\n    <el-form-item label=\"关键字\">\r\n      <el-input v-model=\"querySong.q\" clearable></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"来源\">\r\n      <el-radio-group v-model=\"querySong.source\">\r\n        <el-radio-button :disabled=\"!source.enabled\" v-for=\"source in sources\" :key=\"source.id\" :label=\"source.id\">{{source.label?source.label:source.id}}</el-radio-button>\r\n      </el-radio-group>\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-button @click=\"handleQuerySong\">搜索</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n  <el-table height=\"500px\" v-loading=\"resultSong.loading\" stripe :data=\"resultSong.list\">\r\n    <el-table-column\r\n      prop=\"name\"\r\n      label=\"歌曲名\">\r\n    </el-table-column>\r\n    <el-table-column label=\"歌手\">\r\n      <template slot-scope=\"scope\">\r\n        {{showArtistsName(scope.row.artists)}}\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column label=\"是否免费\">\r\n      <template slot-scope=\"scope\">\r\n        {{scope.row.free?'Y':'N'}}\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column\r\n      label=\"操作\"\r\n    >\r\n      <template slot-scope=\"scope\">\r\n        <el-button type=\"text\" @click=\"handlePlaySong(scope.row.source,scope.row.id)\">播放</el-button>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n  <el-pagination\r\n  v-loading=\"resultSong.loading\"\r\n  background\r\n  layout=\"prev, pager, next\"\r\n  @size-change=\"(size)=>{querySong.pageSize=size;handleQuerySong()}\"\r\n  @current-change=\"(num)=>{querySong.pageNum=num;handleQuerySong()}\"\r\n  :page-size=\"resultSong.pageSize\"\r\n  :current-page=\"resultSong.pageNum\"\r\n  :total=\"resultSong.total\">\r\n</el-pagination>\r\n<audio src=\"...\" ref=\"testAudio\" controls></audio>\r\n</div>\r\n</template>\r\n<script>\r\nimport {searchSong, getUrl} from '@/api/song'\r\nimport {listSource} from '@/api/source'\r\nexport default {\r\n  name: 'search',\r\n  data: function () {\r\n    return {\r\n      sources: [],\r\n      querySong: {\r\n        q: null,\r\n        source: null,\r\n        pageNum: 1,\r\n        pageSize: 5\r\n      },\r\n      resultSong: {\r\n        loading: false,\r\n        list: [],\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        total: 0\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    showArtistsName: function (list) {\r\n      if (!list) {\r\n        return ''\r\n      }\r\n      let result = ''\r\n      list.forEach(element => {\r\n        result += ('-' + element.name)\r\n      })\r\n      return result.substring(1)\r\n    },\r\n    handleQuerySong: function () {\r\n      this.querySong.pageNum = 1\r\n      console.log(this.querySong)\r\n      this.doQuerySong()\r\n    },\r\n    doQuerySong: function () {\r\n      this.resultSong.loading = true\r\n      searchSong(this.querySong).then(res => {\r\n        this.resultSong = res.data\r\n      }).finally(() => {\r\n        setTimeout(() => { this.resultSong.loading = false }, 500)\r\n      })\r\n    },\r\n    handleQuerySources: function () {\r\n      listSource().then(res => {\r\n        this.sources = res.data\r\n      }).then(() => {\r\n        this.sources.forEach(e => {\r\n          if (!this.querySong.source && e.enabled) {\r\n            this.querySong.source = e.id\r\n          }\r\n        })\r\n      }\r\n      )\r\n    },\r\n    handlePlaySong: function (source, id) {\r\n      getUrl(source, id).then(res => {\r\n      //  window.open(res.data, '_blank')\r\n        this.$refs.testAudio.src = res.data\r\n        this.$refs.testAudio.play()\r\n      })\r\n    }\r\n\r\n  },\r\n  mounted: function () {\r\n    this.handleQuerySources()\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{attrs:{\"inline\":\"\",\"size\":\"medium\"}},[_c('el-form-item',{attrs:{\"label\":\"关键字\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.querySong.q),callback:function ($$v) {_vm.$set(_vm.querySong, \"q\", $$v)},expression:\"querySong.q\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"来源\"}},[_c('el-radio-group',{model:{value:(_vm.querySong.source),callback:function ($$v) {_vm.$set(_vm.querySong, \"source\", $$v)},expression:\"querySong.source\"}},_vm._l((_vm.sources),function(source){return _c('el-radio-button',{key:source.id,attrs:{\"disabled\":!source.enabled,\"label\":source.id}},[_vm._v(_vm._s(source.label?source.label:source.id))])}),1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.handleQuerySong}},[_vm._v(\"搜索\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.resultSong.loading),expression:\"resultSong.loading\"}],attrs:{\"height\":\"500px\",\"stripe\":\"\",\"data\":_vm.resultSong.list}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"歌曲名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"歌手\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\r\\n        \"+_vm._s(_vm.showArtistsName(scope.row.artists))+\"\\r\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否免费\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\r\\n        \"+_vm._s(scope.row.free?'Y':'N')+\"\\r\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.handlePlaySong(scope.row.source,scope.row.id)}}},[_vm._v(\"播放\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.resultSong.loading),expression:\"resultSong.loading\"}],attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"page-size\":_vm.resultSong.pageSize,\"current-page\":_vm.resultSong.pageNum,\"total\":_vm.resultSong.total},on:{\"size-change\":function (size){_vm.querySong.pageSize=size;_vm.handleQuerySong()},\"current-change\":function (num){_vm.querySong.pageNum=num;_vm.handleQuerySong()}}}),_vm._v(\" \"),_c('audio',{ref:\"testAudio\",attrs:{\"src\":\"...\",\"controls\":\"\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2f7a4fe7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f7a4fe7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Search.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2f7a4fe7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2f7a4fe7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Search.vue\n// module id = null\n// module chunks = ","import axios from '@/utils/http.js'\r\nexport function listSource () {\r\n  return axios.get('/music-source/list')\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/source.js"],"sourceRoot":""}