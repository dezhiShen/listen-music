webpackJsonp([3],{"/KFX":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("9cIF"),r=t("L0x8"),a={name:"search",data:function(){return{sources:[],querySong:{q:null,source:null,pageNum:1,pageSize:5},resultSong:{loading:!1,list:[],pageNum:1,pageSize:10,total:0}}},methods:{showArtistsName:function(e){if(!e)return"";var n="";return e.forEach(function(e){n+="-"+e.name}),n.substring(1)},handleQuerySong:function(){this.querySong.pageNum=1,console.log(this.querySong),this.doQuerySong()},doQuerySong:function(){var e=this;this.resultSong.loading=!0,Object(o.c)(this.querySong).then(function(n){e.resultSong=n.data}).finally(function(){setTimeout(function(){e.resultSong.loading=!1},500)})},handleQuerySources:function(){var e=this;Object(r.a)().then(function(n){e.sources=n.data}).then(function(){e.sources.forEach(function(n){!e.querySong.source&&n.enabled&&(e.querySong.source=n.id)})})},handlePlaySong:function(e,n){var t=this;Object(o.b)(e,n).then(function(e){t.$refs.testAudio.src=e.data,t.$refs.testAudio.play()})}},mounted:function(){this.handleQuerySources()}},u={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("el-form",{attrs:{inline:"",size:"medium"}},[t("el-form-item",{attrs:{label:"关键字"}},[t("el-input",{attrs:{clearable:""},model:{value:e.querySong.q,callback:function(n){e.$set(e.querySong,"q",n)},expression:"querySong.q"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"来源"}},[t("el-radio-group",{model:{value:e.querySong.source,callback:function(n){e.$set(e.querySong,"source",n)},expression:"querySong.source"}},e._l(e.sources,function(n){return t("el-radio-button",{key:n.id,attrs:{disabled:!n.enabled,label:n.id}},[e._v(e._s(n.label?n.label:n.id))])}),1)],1),e._v(" "),t("el-form-item",[t("el-button",{on:{click:e.handleQuerySong}},[e._v("搜索")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resultSong.loading,expression:"resultSong.loading"}],attrs:{height:"500px",stripe:"",data:e.resultSong.list}},[t("el-table-column",{attrs:{prop:"name",label:"歌曲名"}}),e._v(" "),t("el-table-column",{attrs:{label:"歌手"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v("\r\n        "+e._s(e.showArtistsName(n.row.artists))+"\r\n      ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否免费"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v("\r\n        "+e._s(n.row.free?"Y":"N")+"\r\n      ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handlePlaySong(n.row.source,n.row.id)}}},[e._v("播放")])]}}])})],1),e._v(" "),t("el-pagination",{directives:[{name:"loading",rawName:"v-loading",value:e.resultSong.loading,expression:"resultSong.loading"}],attrs:{background:"",layout:"prev, pager, next","page-size":e.resultSong.pageSize,"current-page":e.resultSong.pageNum,total:e.resultSong.total},on:{"size-change":function(n){e.querySong.pageSize=n,e.handleQuerySong()},"current-change":function(n){e.querySong.pageNum=n,e.handleQuerySong()}}}),e._v(" "),t("audio",{ref:"testAudio",attrs:{src:"...",controls:""}})],1)},staticRenderFns:[]};var l=t("VU/8")(a,u,!1,function(e){t("sXTy")},"data-v-2f7a4fe7",null);n.default=l.exports},L0x8:function(e,n,t){"use strict";n.a=function(){return o.a.get("/music-source/list")};var o=t("3pLw")},sXTy:function(e,n){}});
//# sourceMappingURL=3.ed0590540f6eac2c4baf.js.map